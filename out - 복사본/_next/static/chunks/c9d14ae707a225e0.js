(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99749,68626,e=>{"use strict";function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}e.s(["_",()=>t],99749),e.s(["AudioManager",()=>s],68626);class s{static getInstance(e){return s.instance||(s.instance=new s(e)),s.instance}playBGM(e){this.currentBGMKey&&this.currentBGMKey===e||(this.game.sound.play(e,{loop:!0,volume:this.muted?0:this.masterVolume*this.bgmVolume}),this.currentBGMKey=e)}playSFX(e){this.game.sound.play(e,{volume:this.muted?0:this.masterVolume*this.sfxVolume})}setMasterVolume(e){this.masterVolume=e,this.updateVolumes()}setBGMVolume(e){this.bgmVolume=e,this.updateVolumes()}setSFXVolume(e){this.sfxVolume=e}setMuted(e){this.muted=e,this.updateVolumes()}getMasterVolume(){return this.masterVolume}getBGMVolume(){return this.bgmVolume}getSFXVolume(){return this.sfxVolume}isMuted(){return this.muted}updateVolumes(){let e=this.game.sound.get(this.currentBGMKey||"");if(e){let t=this.muted?0:this.masterVolume*this.bgmVolume;"function"==typeof e.setVolume?e.setVolume(t):e.volume=t}}constructor(e){t(this,"game",void 0),t(this,"currentBGMKey",null),t(this,"masterVolume",1),t(this,"bgmVolume",1),t(this,"sfxVolume",1),t(this,"muted",!1),this.game=e}}t(s,"instance",null)},10211,e=>{"use strict";e.s(["Player",()=>a]);var t=e.i(99749),s=e.i(33901),i=e.i(68626);class a{static load(e){e.load.spritesheet(this.TEXTURE_KEY,this.TEXTURE_PATH,{frameWidth:this.TILE_WIDTH,frameHeight:this.TILE_HEIGHT})}static registerAnims(e){let t=(t,s)=>!e.anims.exists(t)&&e.anims.create({key:t,...s});t(this.ANIM_IDLE.key,{frames:e.anims.generateFrameNumbers(this.TEXTURE_KEY,{start:this.ANIM_IDLE.start,end:this.ANIM_IDLE.end}),frameRate:this.ANIM_IDLE.frameRate,repeat:this.ANIM_IDLE.repeat}),t(this.ANIM_ATTACK.key,{frames:e.anims.generateFrameNumbers(this.TEXTURE_KEY,{start:this.ANIM_ATTACK.start,end:this.ANIM_ATTACK.end}),frameRate:this.ANIM_ATTACK.frameRate,repeat:this.ANIM_ATTACK.repeat}),t(this.ANIM_DAMAGE.key,{frames:e.anims.generateFrameNumbers(this.TEXTURE_KEY,{start:this.ANIM_DAMAGE.start,end:this.ANIM_DAMAGE.end}),frameRate:this.ANIM_DAMAGE.frameRate,repeat:this.ANIM_DAMAGE.repeat})}async moveTo(e){return new Promise(t=>{i.AudioManager.getInstance(this.scene.game).playSFX("walk"),this.scene.tweens.add({targets:this.entity,x:a.TILE_SIZE*e.col,y:a.TILE_SIZE*e.row,duration:200,ease:"Sine.easeInOut",onComplete:()=>{t()}})})}attack(){this.entity.play(a.ANIM_ATTACK.key).once(s.Animations.Events.ANIMATION_COMPLETE,()=>{this.entity.play(a.ANIM_IDLE.key)})}async damage(){return i.AudioManager.getInstance(this.scene.game).playSFX("hit"),new Promise(e=>{this.entity.play(a.ANIM_DAMAGE.key).once(s.Animations.Events.ANIMATION_COMPLETE,()=>{this.entity.play(a.ANIM_IDLE.key),e()})})}constructor(e,s){(0,t._)(this,"scene",void 0),(0,t._)(this,"entity",void 0),this.scene=e,this.entity=e.add.sprite(a.TILE_SIZE*s.col,a.TILE_SIZE*s.row,a.TEXTURE_KEY).play(a.ANIM_IDLE.key).setOrigin(0,.5).setDepth(1e4)}}(0,t._)(a,"TEXTURE_PATH","/texture/Player.png"),(0,t._)(a,"TEXTURE_KEY","texture.Player"),(0,t._)(a,"TILE_WIDTH",16),(0,t._)(a,"TILE_HEIGHT",32),(0,t._)(a,"ANIM_IDLE",{key:"player.anim.idle",start:0,end:1,frameRate:3,repeat:-1}),(0,t._)(a,"ANIM_ATTACK",{key:"player.anim.attack",start:3,end:6,frameRate:12,repeat:0}),(0,t._)(a,"ANIM_DAMAGE",{key:"player.anim.damage",start:8,end:11,frameRate:12,repeat:0}),(0,t._)(a,"TILE_SIZE",16)},9021,e=>{"use strict";e.s(["Box",()=>i]);var t=e.i(99749),s=e.i(68626);class i{static load(e){e.load.spritesheet(this.TEXTURE_KEY,this.TEXTURE_PATH,{frameWidth:this.TILE_WIDTH,frameHeight:this.TILE_HEIGHT})}static registerAnims(e){}async moveTo(e){return new Promise(t=>{this.scene.tweens.add({targets:this.entity,x:16*e.col,y:16*e.row,duration:200,ease:"Sine.easeInOut",onComplete:()=>{t()}})})}restore(){this.entity.setFrame(0)}destroy(){s.AudioManager.getInstance(this.scene.game).playSFX("destroy"),this.entity.setFrame(1)}constructor(e,s){(0,t._)(this,"scene",void 0),(0,t._)(this,"entity",void 0),this.scene=e,this.entity=e.add.sprite(16*s.col,16*s.row,i.TEXTURE_KEY,0).setOrigin(0,0).setDepth(5e3)}}(0,t._)(i,"TEXTURE_PATH","/texture/Box.png"),(0,t._)(i,"TEXTURE_KEY","texture.Box"),(0,t._)(i,"TILE_WIDTH",16),(0,t._)(i,"TILE_HEIGHT",16)},52483,e=>{"use strict";e.s(["Door",()=>s]);var t=e.i(99749);class s{static load(e){e.load.spritesheet(this.TEXTURE_KEY,this.TEXTURE_PATH,{frameWidth:this.TILE_WIDTH,frameHeight:this.TILE_HEIGHT})}static registerAnims(e){}async moveTo(e){return new Promise(t=>{this.scene.tweens.add({targets:this.entity,x:16*e.col,y:16*e.row,duration:200,ease:"Sine.easeInOut",onComplete:()=>{t()}})})}open(){this.entity.setFrame(1)}close(){this.entity.setFrame(0)}constructor(e,i,a=!1){(0,t._)(this,"scene",void 0),(0,t._)(this,"entity",void 0),this.scene=e,this.entity=e.add.sprite(16*i.col,16*i.row,s.TEXTURE_KEY,0).setOrigin(0,0).setDepth(5e3),a&&this.open()}}(0,t._)(s,"TEXTURE_PATH","/texture/Door.png"),(0,t._)(s,"TEXTURE_KEY","texture.Door"),(0,t._)(s,"TILE_WIDTH",16),(0,t._)(s,"TILE_HEIGHT",16)},86401,e=>{"use strict";e.s(["Slime",()=>s]);var t=e.i(99749);class s{static load(e){e.load.spritesheet(s.TEXTURE_KEY,s.TEXTURE_PATH,{frameWidth:16,frameHeight:16})}static registerAnims(e){let t,s;t=this.ANIM_IDLE.key,s={frames:e.anims.generateFrameNumbers(this.TEXTURE_KEY,{start:this.ANIM_IDLE.start,end:this.ANIM_IDLE.end}),frameRate:this.ANIM_IDLE.frameRate,repeat:this.ANIM_IDLE.repeat},e.anims.exists(t)||e.anims.create({key:t,...s})}async moveTo(e,t){var s,i;return"left"===t?null==(s=this.entity)||s.play("slime.move.left"):"right"===t&&(null==(i=this.entity)||i.play("slime.move.right")),new Promise(s=>{this.scene.tweens.add({targets:this.entity,x:16*e.col,y:16*e.row,duration:200,ease:"Sine.easeInOut",onComplete:()=>{var e;("left"===t||"right"===t)&&(null==(e=this.entity)||e.play("slime.idle")),s()}})})}constructor(e,i){(0,t._)(this,"scene",void 0),(0,t._)(this,"entity",void 0),this.scene=e,this.entity=this.scene.add.sprite(16*i.col,16*i.row,s.TEXTURE_KEY).play(s.ANIM_IDLE.key).setOrigin(0,0).setDepth(5e3)}}(0,t._)(s,"TEXTURE_PATH","/texture/Slime.png"),(0,t._)(s,"TEXTURE_KEY","texture.Slime"),(0,t._)(s,"ANIM_IDLE",{key:"slime.anim.idle",start:0,end:1,frameRate:3,repeat:-1})},10707,e=>{"use strict";e.s(["Key",()=>i]);var t=e.i(99749),s=e.i(68626);class i{static load(e){e.load.spritesheet(this.TEXTURE_KEY,this.TEXTURE_PATH,{frameWidth:this.TILE_WIDTH,frameHeight:this.TILE_HEIGHT})}static registerAnims(e){}async moveTo(e){return new Promise(t=>{this.scene.tweens.add({targets:this.entity,x:16*e.col,y:16*e.row,duration:200,ease:"Sine.easeInOut",onComplete:()=>{t()}})})}restore(){this.entity.setFrame(0)}taken(){this.entity.setFrame(1),s.AudioManager.getInstance(this.scene.game).playSFX("door")}constructor(e,s){(0,t._)(this,"scene",void 0),(0,t._)(this,"entity",void 0),this.scene=e,this.entity=e.add.sprite(16*s.col,16*s.row,i.TEXTURE_KEY,0).setOrigin(0,0).setDepth(5e3)}}(0,t._)(i,"TEXTURE_PATH","/texture/Key.png"),(0,t._)(i,"TEXTURE_KEY","texture.Key"),(0,t._)(i,"TILE_WIDTH",16),(0,t._)(i,"TILE_HEIGHT",16)},50049,e=>{"use strict";e.s(["GameScene",()=>m],50049);var t=e.i(99749),s=e.i(33901),i=e.i(10211),a=e.i(9021),r=e.i(52483),n=e.i(86401),h=e.i(10707),o=e.i(68626);class l{start(){0!==this.levels.length&&(this.host.scene.launch(this.levels[this.current]),this.host.scene.launch("stage-ui"),this.host.scene.bringToTop("stage-ui"),this.eventBus.on("game:clear",this.onClear),this.eventBus.on("game:over",this.onOver),this.eventBus.on("game:restart",this.onRestart))}constructor(e,s,i,a){(0,t._)(this,"host",void 0),(0,t._)(this,"eventBus",void 0),(0,t._)(this,"gameEventBus",void 0),(0,t._)(this,"levels",void 0),(0,t._)(this,"current",0),(0,t._)(this,"onClear",()=>{this.gameEventBus.removeAllListeners(),this.host.scene.stop(this.levels[this.current]),this.current=Math.min(this.current+1,this.levels.length-1),this.host.scene.launch(this.levels[this.current]),this.host.scene.bringToTop("stage-ui")}),(0,t._)(this,"onOver",()=>{this.host.scene.pause(this.levels[this.current])}),(0,t._)(this,"onRestart",()=>{this.gameEventBus.removeAllListeners(),this.host.scene.stop(this.levels[this.current]),this.host.scene.launch(this.levels[this.current]),this.host.scene.bringToTop("stage-ui")}),this.host=e,this.eventBus=s,this.gameEventBus=i,this.levels=a}}class m extends s.Scene{preload(){this.load.image("texture.TileSet","/texture/TileSet.png"),a.Box.load(this),r.Door.load(this),h.Key.load(this),i.Player.load(this),n.Slime.load(this),this.cache.audio.exists("walk")||this.load.audio("walk","/audio/sfx/entity/player-move.mp3"),this.cache.audio.exists("destroy")||this.load.audio("destroy","/audio/sfx/destroy.mp3"),this.cache.audio.exists("door")||this.load.audio("door","/audio/sfx/door.mp3"),this.cache.audio.exists("fail")||this.load.audio("fail","/audio/sfx/fail.mp3"),this.cache.audio.exists("bridge")||this.load.audio("bridge","/audio/sfx/bridge.mp3"),this.cache.audio.exists("hit")||this.load.audio("hit","/audio/sfx/hit.mp3")}create(){i.Player.registerAnims(this),n.Slime.registerAnims(this),new l(this,this.eventBus,this.gameEventBus,["stage1","stage2","stage3","stage4","stage6","stage8","setting"]).start(),this.eventBus.on("game:over",()=>{o.AudioManager.getInstance(this.game).playSFX("fail")})}constructor(){super("game"),(0,t._)(this,"eventBus",new s.Events.EventEmitter),(0,t._)(this,"gameEventBus",new s.Events.EventEmitter)}}}]);