(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31593,e=>{"use strict";e.s(["StageUiScene",()=>i]);var t=e.i(33901);class i extends t.Scene{preload(){!1===this.textures.exists("ui.game.DialogWindow")&&this.load.image("ui.game.DialogWindow","/ui/game/DialogWindow.png"),!1===this.textures.exists("ui.game.GameMask")&&this.load.image("ui.game.GameMask","/ui/game/GameMask.png"),!1===this.textures.exists("ui.icon.NoteIcon")&&this.load.image("ui.icon.NoteIcon","/ui/icon/NoteIcon.png"),!1===this.textures.exists("ui.game.GameOutline")&&this.load.image("ui.game.GameOutline","/ui/game/GameOutline.png"),!1===this.textures.exists("ui.icon.ReplayIcon")&&this.load.image("ui.icon.ReplayIcon","/ui/icon/ReplayIcon.png"),!1===this.textures.exists("ui.font")&&this.load.bitmapFont("ui.font","/font/font.png","/font/font.fnt"),!1===this.textures.exists("ui.Notice")&&this.load.image("ui.game.Notice","/ui/game/Notice.png"),!1===this.textures.exists("ui.icon.NewNoteIcon")&&this.load.image("ui.icon.NewNoteIcon","/ui/icon/NewNoteIcon.png"),!1===this.textures.exists("ui.number.b0")&&this.load.image("ui.number.b0","/ui/number/b0.png"),!1===this.textures.exists("ui.number.b1")&&this.load.image("ui.number.b1","/ui/number/b1.png"),!1===this.textures.exists("ui.number.b2")&&this.load.image("ui.number.b2","/ui/number/b2.png"),!1===this.textures.exists("ui.number.b3")&&this.load.image("ui.number.b3","/ui/number/b3.png"),!1===this.textures.exists("ui.number.b4")&&this.load.image("ui.number.b4","/ui/number/b4.png"),!1===this.textures.exists("ui.number.b5")&&this.load.image("ui.number.b5","/ui/number/b5.png"),!1===this.textures.exists("ui.number.b6")&&this.load.image("ui.number.b6","/ui/number/b6.png"),!1===this.textures.exists("ui.number.b7")&&this.load.image("ui.number.b7","/ui/number/b7.png"),!1===this.textures.exists("ui.number.b8")&&this.load.image("ui.number.b8","/ui/number/b8.png"),!1===this.textures.exists("ui.number.b9")&&this.load.image("ui.number.b9","/ui/number/b9.png"),!1===this.textures.exists("ui.patchnote.PatchBase")&&this.load.image("ui.patchnote.PatchBase","/ui/patchnote/PatchBase.png"),!1===this.textures.exists("ui.patchnote.PatchClose")&&this.load.image("ui.patchnote.PatchClose","/ui/patchnote/PatchClose.png"),!1===this.textures.exists("ui.patchnote.Patch_Checkbox")&&this.load.image("ui.patchnote.Patch_Checkbox","/ui/patchnote/Patch_Checkbox.png"),!1===this.textures.exists("ui.patchnote.Patch_Checkbox1")&&this.load.image("ui.patchnote.Patch_Checkbox1","/ui/patchnote/Patch_Checkbox1.png"),!1===this.textures.exists("ui.patchnote.Patch_Checkbox2")&&this.load.image("ui.patchnote.Patch_Checkbox2","/ui/patchnote/Patch_Checkbox2.png"),!1===this.textures.exists("ui.patchnote.Patch_Check1")&&this.load.image("ui.patchnote.Patch_Check1","/ui/patchnote/Patch_Check1.png"),!1===this.textures.exists("ui.patchnote.Patch_Check2")&&this.load.image("ui.patchnote.Patch_Check2","/ui/patchnote/Patch_Check2.png");for(let e=1;e<=9;e++){let t="ui.patchnote.Patch".concat(e),i="ui.patchnote.PatchSel".concat(e);!1===this.textures.exists(t)&&this.load.image(t,"/ui/patchnote/Patch".concat(e,".png")),!1===this.textures.exists(i)&&this.load.image(i,"/ui/patchnote/PatchSel".concat(e,".png"))}}async create(){let e,i,{width:s,height:a}=this.scale;if(this.textures.exists("ui.game.GameMask")&&this.add.image(0,0,"ui.game.GameMask").setOrigin(0,0).setTintFill(657930),this.textures.exists("ui.game.GameOutline")&&this.add.image(.5*s,0,"ui.game.GameOutline").setOrigin(.5,0),this.textures.exists("ui.game.DialogWindow")&&this.add.image(.5*s,a-10,"ui.game.DialogWindow").setOrigin(.5,1),this.textures.exists("ui.icon.NoteIcon")){let i=this.add.image(s-61,8,"ui.icon.NoteIcon").setOrigin(1,0).setInteractive({useHandCursor:!0});i.on(t.Input.Events.POINTER_DOWN,()=>{this.scene.get("game").eventBus.emit("note:open")}),e=i}if(this.textures.exists("ui.icon.ReplayIcon")&&this.add.image(s-61,26,"ui.icon.ReplayIcon").setOrigin(1,0).setInteractive({useHandCursor:!0}).on(t.Input.Events.POINTER_DOWN,()=>{this.scene.get("game").eventBus.emit("game:over")}),this.textures.exists("ui.game.Notice")){let e=this.add.image(.5*s,.5*a,"ui.game.Notice").setOrigin(.5,.5).setVisible(!1).setDepth(2e4).setInteractive({useHandCursor:!0});i=e,e.on(t.Input.Events.POINTER_DOWN,()=>{e.setVisible(!1),this.scene.get("game").eventBus.emit("game:restart")})}let u=this.scene.get("game").eventBus;u.on("game:over",()=>{i&&i.setVisible(!0)});let n=t=>{if(!e)return;let i=t&&this.textures.exists("ui.icon.NewNoteIcon")?"ui.icon.NewNoteIcon":"ui.icon.NoteIcon";e.texture.key!==i&&e.setTexture(i)};u.on("patch:availability",e=>n(e));let o=[],h=e=>{let t=this.add.image(s-12-10*e,8,"ui.number.b0").setOrigin(1,0).setDepth(2e4);return o.push(t),t};h(0),h(1),h(2);let c=e=>{let t=Math.max(0,e).toString();for(let e=0;e<o.length;e++){let i=t.length-1-e,s=i>=0,a=o[e];if(a.setVisible(s),s){let e="ui.number.b".concat(t[i]);this.textures.exists(e)&&a.setTexture(e)}}};u.on("ui:moves",e=>c(e))}setDialog(e){this.children.getByName("ui.game.DialogText").setText(e)}setHPUI(e){}constructor(){super("stage-ui")}}}]);